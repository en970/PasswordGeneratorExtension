<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Strong Password Generator</title>
    <style>
        /* Simple, minimal popup style (reverted to earlier look) */
        body { 
            width: 300px; 
            padding: 10px; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #f4f4f9; 
            color: #222; 
        }
        h1 { font-size: 15px; margin: 0 0 8px 0; text-align: center; }

        #password-output { 
            border: 2px solid #ccc; 
            padding: 12px; 
            margin-bottom: 12px; 
            cursor: pointer; 
            user-select: all; 
            font-size: 1.05em; 
            font-weight: 600; 
            text-align: center; 
            background-color: #ffffff; 
            border-radius: 4px;
            word-break: break-all;
            color: #222;
        }

        .note { font-size: 12px; color: #555; margin-bottom: 8px; text-align: center; }

    .grid { display:block; margin-bottom:10px; }
    .row { display:flex; justify-content:space-between; align-items:center; padding:6px 0; }
    label { font-weight:600; color: #222; }
    input[type="number"], input[type="text"] { 
        width:60px; padding:6px; border:1px solid #ccc; border-radius:3px; text-align:center; 
        background-color: #ffffff; 
        color: #222;
    }
    input[type="text"] { width: 100%; }

        button { 
            width:100%; padding:10px; background-color: #28a745; color:#fff; border:none; border-radius:4px; cursor:pointer; font-size:14px; 
        }
        button.secondary { background: #64748b; }
        button.small { width:auto; padding:6px 10px; font-size:13px; }

        #privacy-notice { 
            margin-top:12px; padding:10px; background: #e6ffed; border:1px solid #006400; border-radius:5px; font-size:12px; color: #006400; 
            text-align: center;
        }

        #save-form-container { 
            display:none; margin-bottom:10px; padding:8px; border:1px solid #e6eef5; background: #ffffff; 
            border-radius: 6px;
        }
        #save-form-container input[type=text] { 
            width:100%; padding:6px; margin:6px 0 8px 0; border:1px solid #ccc; border-radius:3px; 
            background-color: #ffffff; 
            color: #222;
        }

        #password-list { 
            list-style:none; padding:0; margin:0; max-height:140px; overflow:auto; border-top:1px solid #e6e6e6; padding-top:6px; 
        }
        #password-list li { 
            display:flex; justify-content:space-between; align-items:center; padding:6px 0; border-bottom:1px solid #f0f0f0; 
        }
        #password-list li strong { 
            font-size:13px; margin-right: 15px;
        }
        .meta {
            display: flex;
            align-items: center;
            flex: 1;
        }
        .password-text, .password-dots {
            font-family: monospace;
            color: #222;
        }
        .actions {
            display: flex;
            gap: 6px;
        }
        .copy-saved {
            background: #06b6d4 !important;
            color: #fff !important;
        }
        .delete-saved {
            background: #ef4444 !important;
            color: #fff !important;
        }

        #toast { 
            position: fixed; left: 50%; transform: translateX(-50%); bottom: 18px; 
            background: rgba(15,23,42,0.9); color: #fff; padding:8px 12px; border-radius:6px; display:none; font-size:13px; z-index:9999; 
        }
        /* Modal (delete confirmation) */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: #fff;
            color: #222;
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.2);
            max-width: 280px;
            text-align: center;
        }
        .modal-actions { display: flex; gap: 8px; justify-content: center; margin-top: 12px; }
        .danger-btn { background: #ef4444; color: #fff; border: none; padding: 8px 12px; border-radius:4px; cursor:pointer; }
        .modal-overlay.show { display: flex; }
    </style>
</head>
<body>
    <h1>Strong Password Generator</h1>
    <div id="password-output" title="Click to copy">Your generated password will appear here</div>

    <div class="note">Specify the number of characters from each category (total must be at least 8).</div>

    <div class="grid">
        <div class="row">
            <label for="symbols">Symbols</label>
            <input type="number" id="symbols" value="4" min="0">
        </div>
        <div class="row">
            <label for="numbers">Numbers</label>
            <input type="number" id="numbers" value="4" min="0">
        </div>
        <div class="row">
            <label for="uppercase">Uppercase</label>
            <input type="number" id="uppercase" value="4" min="0">
        </div>
        <div class="row">
            <label for="lowercase">Lowercase</label>
            <input type="number" id="lowercase" value="4" min="0">
        </div>
    </div>

    <div style="display:flex; gap:8px; margin-bottom:10px;">
        <button id="generate">Generate Password</button>
        <button id="randomize-specs" style="background:#64748b;">Randomize Specs</button>
    </div>

    <div style="display:flex; gap:8px; margin-bottom:10px;">
        <button id="toggle-save-form" style="background:#3b82f6;">Save a Password</button>
    </div>

    <!-- Inline save form (hidden by default) -->
    <div id="save-form-container" style="display:none; margin-bottom:10px; padding:8px; border:1px solid #e6eef5; border-radius:6px; background:#ffffff;">
        <label for="save-name-input" style="font-weight:600; font-size:13px;">Name:</label>
        <input type="text" id="save-name-input" placeholder="e.g., 'My Google Account'" style="width:100%; padding:6px; margin:6px 0 8px 0; border:1px solid #d1d5db; border-radius:4px;" />

        <label for="save-password-input" style="font-weight:600; font-size:13px;">Password:</label>
        <input type="text" id="save-password-input" style="width:100%; padding:6px; margin:6px 0 8px 0; border:1px solid #d1d5db; border-radius:4px;" />

        <div style="display:flex; gap:8px;">
            <button id="confirm-save-button" style="background:#0ea5e9; color:#fff; padding:8px 10px; border-radius:4px; border:none; cursor:pointer;">Confirm Save</button>
            <button id="cancel-save-button" style="background:#ef4444; color:#fff; padding:8px 10px; border-radius:4px; border:none; cursor:pointer;">Cancel</button>
        </div>
    </div>

    <div id="password-list-container" style="margin-top:12px;">
        <h3>My Passwords</h3>
        <label class="visibility-toggle"><input type="checkbox" id="toggle-visibility"> Show Passwords</label>
        <ul id="password-list"></ul>
        <div id="status-message" style="display:none; color: green; margin-top: 10px; font-size: 12px; text-align: center;"></div>
    </div>

    <div id="privacy-notice" role="note">
        <strong>Privacy Notice:</strong> Your passwords are generated locally on your device and are never stored or transmitted anywhere.
    </div>

    <!-- Delete confirmation modal (hidden by default) -->
    <div id="delete-confirmation-modal" class="modal-overlay">
        <div class="modal-content">
            <p>Are you sure you want to delete this password? This action cannot be undone.</p>
            <div class="modal-actions">
                <button id="confirm-delete-btn" class="danger-btn">Yes, Delete</button>
                <button id="cancel-delete-btn">Cancel</button>
            </div>
        </div>
    </div>

    <div id="toast"></div>

    <script src="popup.js"></script>
</body>
</html>